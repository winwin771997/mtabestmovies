javascript:(function prepareVideo() { var el = document.querySelectorAll('div[data-sigil]');for(var i=0;i<el.length; i++){var sigil = el[i].dataset.sigil;if(sigil.indexOf('inlineVideo') > -1){delete el[i].dataset.sigil;console.log(i);var jsonData = JSON.parse(el[i].dataset.store);console.log(jsonData['dashManifest']);var watchurl=jsonData['src'];var audiourl='',sd640purl='',sd540purl='',sd480purl='',hdurl='';var dashManifest=jsonData['dashManifest'];if (dashManifest!=null){var t=dashManifest.indexOf('>');var text=dashManifest.substring(t+1);var parser = new DOMParser();var xmlDoc = parser.parseFromString(text,'text/xml');var representations=xmlDoc.getElementsByTagName('Representation');if(representations.length>0){for(var j=0;j<representations.length;j++){var representation=representations[j];var type=representation.getAttribute('mimeType');if(type.includes('video')){var qualityLabel=representation.getAttribute('FBQualityLabel');if(qualityLabel.includes('640p')){sd640purl=representation.getElementsByTagName('BaseURL')[0].childNodes[0].nodeValue;}else if(qualityLabel.includes('540p')){sd540purl=representation.getElementsByTagName('BaseURL')[0].childNodes[0].nodeValue;}else if(qualityLabel.includes('480p')){sd480purl=representation.getElementsByTagName('BaseURL')[0].childNodes[0].nodeValue;}else if(qualityLabel.includes('720p')){hdurl=representation.getElementsByTagName('BaseURL')[0].childNodes[0].nodeValue;}}else if(type.includes('audio')){audiourl=representation.getElementsByTagName('BaseURL')[0].childNodes[0].nodeValue;}}}}var pDiv = el[i].parentElement; var element = document.createElement('button');element.appendChild(document.createTextNode('Download'));element.style.fontSize = '30px';element.style.background = '#043d74';pDiv.appendChild(element);console.log(element);element.setAttribute('onClick', 'interface.getData(\"'+watchurl+'\",\"'+audiourl+'\",\"'+hdurl+'\",\"'+sd640purl+'\",\"'+sd540purl+'\",\"'+sd480purl+'\");');el[i].setAttribute('onClick', 'interface.getData(\"'+watchurl+'\",\"'+audiourl+'\",\"'+hdurl+'\",\"'+sd640purl+'\",\"'+sd540purl+'\",\"'+sd480purl+'\");');}}})()